From 502550f9156570a4e839254dd27ceddab31819cf Mon Sep 17 00:00:00 2001
From: Michael Simacek <msimacek@redhat.com>
Date: Mon, 4 Jan 2016 17:05:00 +0100
Subject: [PATCH] Port to JDK 7

---
 .../org/apache/commons/dbcp/BasicDataSource.java   |  7 +++++++
 .../commons/dbcp/DelegatingCallableStatement.java  | 17 +++++++++++++++++
 .../apache/commons/dbcp/DelegatingConnection.java  | 22 ++++++++++++++++++++++
 .../apache/commons/dbcp/DelegatingResultSet.java   |  9 +++++++++
 .../apache/commons/dbcp/DelegatingStatement.java   |  9 +++++++++
 .../org/apache/commons/dbcp/PoolingDataSource.java |  6 ++++++
 .../org/apache/commons/dbcp/PoolingDriver.java     |  6 ++++++
 .../commons/dbcp/cpdsadapter/ConnectionImpl.java   | 22 ++++++++++++++++++++++
 .../dbcp/cpdsadapter/DriverAdapterCPDS.java        |  7 +++++++
 .../dbcp/datasources/PerUserPoolDataSource.java    |  6 ++++++
 .../dbcp/datasources/SharedPoolDataSource.java     |  6 ++++++
 .../org/apache/commons/dbcp/TesterConnection.java  | 22 ++++++++++++++++++++++
 src/test/org/apache/commons/dbcp/TesterDriver.java |  5 +++++
 .../org/apache/commons/dbcp/TesterResultSet.java   | 14 ++++++++++++++
 .../org/apache/commons/dbcp/TesterStatement.java   | 14 ++++++++++++++
 15 files changed, 172 insertions(+)

diff --git a/src/java/org/apache/commons/dbcp/BasicDataSource.java b/src/java/org/apache/commons/dbcp/BasicDataSource.java
index a6a38ae..0b94c71 100644
--- a/src/java/org/apache/commons/dbcp/BasicDataSource.java
+++ b/src/java/org/apache/commons/dbcp/BasicDataSource.java
@@ -18,10 +18,13 @@ package org.apache.commons.dbcp;
 
 import java.io.PrintWriter;
 import java.util.Properties;
+import java.util.logging.Logger;
 import java.sql.Connection;
 import java.sql.Driver;
 import java.sql.DriverManager;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
+
 import javax.sql.DataSource;
 
 import org.apache.commons.pool.impl.GenericKeyedObjectPool;
@@ -905,4 +908,8 @@ public class BasicDataSource implements DataSource {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/DelegatingCallableStatement.java b/src/java/org/apache/commons/dbcp/DelegatingCallableStatement.java
index eff2ce0..c66e6ec 100644
--- a/src/java/org/apache/commons/dbcp/DelegatingCallableStatement.java
+++ b/src/java/org/apache/commons/dbcp/DelegatingCallableStatement.java
@@ -31,6 +31,7 @@ import java.util.Calendar;
 import java.io.InputStream;
 import java.io.Reader;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.RowId;
 import java.sql.NClob;
 import java.sql.SQLXML;
@@ -464,4 +465,20 @@ public class DelegatingCallableStatement extends DelegatingPreparedStatement
     public void setNClob(String parameterName, Reader reader) throws SQLException {
         //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public void closeOnCompletion() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public boolean isCloseOnCompletion() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public <T> T getObject(int parameterIndex, Class<T> type) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public <T> T getObject(String parameterName, Class<T> type) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
\ No newline at end of file
diff --git a/src/java/org/apache/commons/dbcp/DelegatingConnection.java b/src/java/org/apache/commons/dbcp/DelegatingConnection.java
index c40027c..e341636 100644
--- a/src/java/org/apache/commons/dbcp/DelegatingConnection.java
+++ b/src/java/org/apache/commons/dbcp/DelegatingConnection.java
@@ -21,6 +21,7 @@ import java.sql.Connection;
 import java.sql.DatabaseMetaData;
 import java.sql.PreparedStatement;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
 import java.sql.Clob;
@@ -33,6 +34,7 @@ import java.sql.Struct;
 import java.util.List;
 import java.util.Map;
 import java.util.Properties;
+import java.util.concurrent.Executor;
 
 /**
  * A base delegating implementation of {@link Connection}.
@@ -484,4 +486,24 @@ public class DelegatingConnection extends AbandonedTrace
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public void abort(Executor arg0) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public int getNetworkTimeout() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public String getSchema() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void setNetworkTimeout(Executor arg0, int arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void setSchema(String arg0) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/DelegatingResultSet.java b/src/java/org/apache/commons/dbcp/DelegatingResultSet.java
index 8267292..c173f0a 100644
--- a/src/java/org/apache/commons/dbcp/DelegatingResultSet.java
+++ b/src/java/org/apache/commons/dbcp/DelegatingResultSet.java
@@ -25,6 +25,7 @@ import java.io.InputStream;
 import java.sql.SQLWarning;
 import java.sql.ResultSetMetaData;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.io.Reader;
 import java.sql.Statement;
 import java.util.Map;
@@ -789,4 +790,12 @@ public class DelegatingResultSet extends AbandonedTrace implements ResultSet {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public <T> T getObject(int arg0, Class<T> arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public <T> T getObject(String arg0, Class<T> arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/DelegatingStatement.java b/src/java/org/apache/commons/dbcp/DelegatingStatement.java
index bd4678f..25653d3 100644
--- a/src/java/org/apache/commons/dbcp/DelegatingStatement.java
+++ b/src/java/org/apache/commons/dbcp/DelegatingStatement.java
@@ -19,6 +19,7 @@ package org.apache.commons.dbcp;
 import java.sql.Connection;
 import java.sql.ResultSet;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
 import java.util.List;
@@ -342,4 +343,12 @@ public class DelegatingStatement extends AbandonedTrace implements Statement {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public void closeOnCompletion() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public boolean isCloseOnCompletion() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/PoolingDataSource.java b/src/java/org/apache/commons/dbcp/PoolingDataSource.java
index 038331b..612d2cb 100644
--- a/src/java/org/apache/commons/dbcp/PoolingDataSource.java
+++ b/src/java/org/apache/commons/dbcp/PoolingDataSource.java
@@ -22,10 +22,12 @@ import java.sql.Connection;
 import java.sql.DatabaseMetaData;
 import java.sql.PreparedStatement;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
 import java.util.Map;
 import java.util.NoSuchElementException;
+import java.util.logging.Logger;
 
 import javax.sql.DataSource;
 
@@ -417,4 +419,8 @@ public class PoolingDataSource implements DataSource {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/PoolingDriver.java b/src/java/org/apache/commons/dbcp/PoolingDriver.java
index 0a7fe9e..cfceb69 100644
--- a/src/java/org/apache/commons/dbcp/PoolingDriver.java
+++ b/src/java/org/apache/commons/dbcp/PoolingDriver.java
@@ -26,6 +26,7 @@ import java.sql.DriverManager;
 import java.sql.DriverPropertyInfo;
 import java.sql.PreparedStatement;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
 import java.util.HashMap;
@@ -33,6 +34,7 @@ import java.util.Map;
 import java.util.NoSuchElementException;
 import java.util.Properties;
 import java.util.Set;
+import java.util.logging.Logger;
 
 import org.apache.commons.jocl.JOCLContentHandler;
 import org.apache.commons.pool.ObjectPool;
@@ -469,4 +471,8 @@ public class PoolingDriver implements Driver {
             }
         }
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/cpdsadapter/ConnectionImpl.java b/src/java/org/apache/commons/dbcp/cpdsadapter/ConnectionImpl.java
index 5c02353..91b1166 100644
--- a/src/java/org/apache/commons/dbcp/cpdsadapter/ConnectionImpl.java
+++ b/src/java/org/apache/commons/dbcp/cpdsadapter/ConnectionImpl.java
@@ -18,6 +18,7 @@ package org.apache.commons.dbcp.cpdsadapter;
 
 import java.util.Map;
 import java.util.Properties;
+import java.util.concurrent.Executor;
 import java.sql.Connection;
 import java.sql.DatabaseMetaData;
 import java.sql.PreparedStatement;
@@ -25,6 +26,7 @@ import java.sql.CallableStatement;
 import java.sql.Statement;
 import java.sql.SQLWarning;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.Clob;
 import java.sql.Blob;
 import java.sql.NClob;
@@ -513,4 +515,24 @@ class ConnectionImpl implements Connection {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public void abort(Executor arg0) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public int getNetworkTimeout() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public String getSchema() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void setNetworkTimeout(Executor arg0, int arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void setSchema(String arg0) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.java b/src/java/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.java
index c6fc9ca..115927c 100644
--- a/src/java/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.java
+++ b/src/java/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.java
@@ -17,10 +17,13 @@
 package org.apache.commons.dbcp.cpdsadapter;
 
 import java.util.Hashtable;
+import java.util.logging.Logger;
 import  java.io.PrintWriter;
 import  java.io.Serializable;
 import java.sql.DriverManager;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
+
 import javax.sql.PooledConnection;
 import javax.sql.ConnectionPoolDataSource;
 import javax.naming.Name;
@@ -553,4 +556,8 @@ public class DriverAdapterCPDS
         assertInitializationAllowed();
         _minEvictableIdleTimeMillis = minEvictableIdleTimeMillis;
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/datasources/PerUserPoolDataSource.java b/src/java/org/apache/commons/dbcp/datasources/PerUserPoolDataSource.java
index 48c318f..d9ae5f2 100644
--- a/src/java/org/apache/commons/dbcp/datasources/PerUserPoolDataSource.java
+++ b/src/java/org/apache/commons/dbcp/datasources/PerUserPoolDataSource.java
@@ -20,9 +20,11 @@ import java.io.IOException;
 import java.io.ObjectInputStream;
 import java.sql.Connection;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.util.HashMap;
 import java.util.Iterator;
 import java.util.Map;
+import java.util.logging.Logger;
 
 import javax.naming.NamingException;
 import javax.sql.ConnectionPoolDataSource;
@@ -499,4 +501,8 @@ public class PerUserPoolDataSource
             throw new IOException("NamingException: " + e);
         }
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java b/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java
index 09ccc1b..70a6900 100644
--- a/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java
+++ b/src/java/org/apache/commons/dbcp/datasources/SharedPoolDataSource.java
@@ -20,7 +20,9 @@ import java.io.IOException;
 import java.io.ObjectInputStream;
 import java.sql.Connection;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.util.Map;
+import java.util.logging.Logger;
 
 import javax.naming.NamingException;
 import javax.sql.ConnectionPoolDataSource;
@@ -239,5 +241,9 @@ public class SharedPoolDataSource
             throw new IOException("NamingException: " + e);
         }
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
 
diff --git a/src/test/org/apache/commons/dbcp/TesterConnection.java b/src/test/org/apache/commons/dbcp/TesterConnection.java
index 191944e..e75f4d8 100644
--- a/src/test/org/apache/commons/dbcp/TesterConnection.java
+++ b/src/test/org/apache/commons/dbcp/TesterConnection.java
@@ -21,6 +21,7 @@ import java.sql.Connection;
 import java.sql.DatabaseMetaData;
 import java.sql.PreparedStatement;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
 import java.sql.Clob;
@@ -32,6 +33,7 @@ import java.sql.Array;
 import java.sql.Struct;
 import java.util.Map;
 import java.util.Properties;
+import java.util.concurrent.Executor;
 
 /**
  * A dummy {@link Connection}, for testing purposes.
@@ -336,4 +338,24 @@ public class TesterConnection implements Connection {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public void abort(Executor arg0) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public int getNetworkTimeout() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public String getSchema() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void setNetworkTimeout(Executor arg0, int arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void setSchema(String arg0) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/test/org/apache/commons/dbcp/TesterDriver.java b/src/test/org/apache/commons/dbcp/TesterDriver.java
index 1669907..36bb022 100644
--- a/src/test/org/apache/commons/dbcp/TesterDriver.java
+++ b/src/test/org/apache/commons/dbcp/TesterDriver.java
@@ -21,7 +21,9 @@ import java.sql.Driver;
 import java.sql.DriverManager;
 import java.sql.DriverPropertyInfo;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.util.Properties;
+import java.util.logging.Logger;
 
 /**
  * Mock object implementing the <code>java.sql.Driver</code> interface.
@@ -121,4 +123,7 @@ public class TesterDriver implements Driver {
     protected static int MAJOR_VERSION = 1;
     protected static int MINOR_VERSION = 0;
 
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/test/org/apache/commons/dbcp/TesterResultSet.java b/src/test/org/apache/commons/dbcp/TesterResultSet.java
index 839aeb1..b00de67 100644
--- a/src/test/org/apache/commons/dbcp/TesterResultSet.java
+++ b/src/test/org/apache/commons/dbcp/TesterResultSet.java
@@ -24,6 +24,7 @@ import java.sql.Ref;
 import java.sql.ResultSet;
 import java.sql.ResultSetMetaData;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
 import java.sql.RowId;
@@ -31,6 +32,7 @@ import java.sql.NClob;
 import java.sql.SQLXML;
 import java.util.Calendar;
 import java.util.Map;
+import java.util.logging.Logger;
 import java.io.Reader;
 import java.io.InputStream;
 
@@ -964,4 +966,16 @@ public class TesterResultSet implements ResultSet {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public <T> T getObject(int arg0, Class<T> arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public <T> T getObject(String arg0, Class<T> arg1) throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
diff --git a/src/test/org/apache/commons/dbcp/TesterStatement.java b/src/test/org/apache/commons/dbcp/TesterStatement.java
index 16dc693..95338ba 100644
--- a/src/test/org/apache/commons/dbcp/TesterStatement.java
+++ b/src/test/org/apache/commons/dbcp/TesterStatement.java
@@ -19,8 +19,10 @@ package org.apache.commons.dbcp;
 import java.sql.Connection;
 import java.sql.ResultSet;
 import java.sql.SQLException;
+import java.sql.SQLFeatureNotSupportedException;
 import java.sql.SQLWarning;
 import java.sql.Statement;
+import java.util.logging.Logger;
 
 /**
  * A dummy {@link Statement}, for testing purposes.
@@ -283,4 +285,16 @@ public class TesterStatement implements Statement {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         return false;  //To change body of implemented methods use File | Settings | File Templates.
     }
+
+    public Logger getParentLogger() throws SQLFeatureNotSupportedException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public void closeOnCompletion() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
+
+    public boolean isCloseOnCompletion() throws SQLException {
+        throw new SQLFeatureNotSupportedException();
+    }
 }
-- 
2.5.0

